$(function(){if($.common.isEmpty($("#orgId").val())){$("#orgId").val(0)}$.pop_up_tree.init({obj:"pop-up-org-tree",value:"orgId",idKey:"id",pIdKey:"parentId",rootPId:"0",name:"orgName",type:"POST",expand:true,required:true,url:contextPath+"org/list"});laydate.render({elem:"#birthday",theme:"#6284f3",max:new Date().toLocaleDateString()})});$(".form-horizontal").validate({onkeyup:false,rules:{telephone:{isTel:true,remote:{async:false,url:contextPath+"user/unique",type:"post",dataType:"JSON",data:{id:function(){return $("#id").val()},telephone:function(){return $("#telephone").val()}},dataFilter:function(b,a){b=JSON.parse(b);return b.result}}},idCard:{isIdCardNo:true},username:{required:true,remote:{async:false,url:contextPath+"user/unique",type:"post",dataType:"JSON",data:{id:function(){return $("#id").val()},username:function(){return $("#username").val()}},dataFilter:function(b,a){b=JSON.parse(b);return b.result}}},jobNumber:{required:true,remote:{async:false,url:contextPath+"user/unique",type:"post",dataType:"JSON",data:{id:function(){return $("#id").val()},username:function(){return $("#jobNumber").val()}},dataFilter:function(b,a){b=JSON.parse(b);return b.result}}},email:{remote:{async:false,url:contextPath+"user/unique",type:"post",dataType:"JSON",data:{id:function(){return $("#id").val()},email:function(){return $("#email").val()}},dataFilter:function(b,a){b=JSON.parse(b);return b.result}}},phone:{isPhone:true,remote:{async:false,url:contextPath+"user/unique",type:"post",dataType:"JSON",data:{id:function(){return $("#id").val()},phone:function(){return $("#phone").val()}},dataFilter:function(b,a){b=JSON.parse(b);return b.result}}}},messages:{username:{remote:"用户名已存在"},jobNumber:{remote:"工号已存在"},phone:{remote:"手机号已存在"},email:{remote:"邮箱已存在"},telephone:{remote:"电话已存在"}}});function doSubmit(){if($(".form-horizontal").valid()){var a=$(".form-horizontal").serializeArray();$('input:checkbox[id="roleList"]:checked').each(function(b){a.push({name:"roleVOS["+b+"].id",value:$(this).val()})});$.operate.save($(".form-horizontal").attr("action"),a)}};