(function(e){function f(s,v){var r=e.data(s,"accordion");var q=r.options;var x=r.panels;var u=e(s);var z=(q.halign=="left"||q.halign=="right");u.children(".panel-last").removeClass("panel-last");u.children(".panel:last").addClass("panel-last");if(v){e.extend(q,{width:v.width,height:v.height})}u._size(q);var w=0;var A="auto";var t=u.find(">.panel>.accordion-header");if(t.length){if(z){e(t[0]).next().panel("resize",{width:u.width(),height:u.height()});w=e(t[0])._outerWidth()}else{w=e(t[0]).css("height","")._outerHeight()}}if(!isNaN(parseInt(q.height))){if(z){A=u.width()-w*t.length}else{A=u.height()-w*t.length}}y(true,A-y(false));function y(F,B){var D=0;for(var C=0;C<x.length;C++){var H=x[C];if(z){var E=H.panel("header")._outerWidth(w)}else{var E=H.panel("header")._outerHeight(w)}if(H.panel("options").collapsible==F){var G=isNaN(B)?undefined:(B+w*E.length);if(z){H.panel("resize",{height:u.height(),width:(F?G:undefined)});D+=H.panel("panel")._outerWidth()-w*E.length}else{H.panel("resize",{width:u.width(),height:(F?G:undefined)});D+=H.panel("panel").outerHeight()-w*E.length}}}return D}}function o(r,w,v,u){var s=e.data(r,"accordion").panels;var q=[];for(var t=0;t<s.length;t++){var x=s[t];if(w){if(x.panel("options")[w]==v){q.push(x)}}else{if(x[0]==e(v)[0]){return t}}}if(w){return u?q:(q.length?q[0]:null)}else{return -1}}function h(q){return o(q,"collapsed",false,true)}function k(r){var q=h(r);return q.length?q[0]:null}function p(r,q){return o(r,null,q)}function g(q,s){var r=e.data(q,"accordion").panels;if(typeof s=="number"){if(s<0||s>=r.length){return null}else{return r[s]}}return o(q,"title",s)}function c(q){var r=e.data(q,"accordion").options;var s=e(q);if(r.border){s.removeClass("accordion-noborder")}else{s.addClass("accordion-noborder")}}function n(q){var r=e.data(q,"accordion");var s=e(q);s.addClass("accordion");r.panels=[];s.children("div").each(function(){var u=e.extend({},e.parser.parseOptions(this),{selected:(e(this).attr("selected")?true:undefined)});var t=e(this);r.panels.push(t);j(q,t,u)});s.bind("_resize",function(u,t){if(e(this).hasClass("easyui-fluid")||t){f(q)}return false})}function j(r,q,u){var w=e.data(r,"accordion").options;q.panel(e.extend({},{collapsible:true,minimizable:false,maximizable:false,closable:false,doSize:false,collapsed:true,headerCls:"accordion-header",bodyCls:"accordion-body",halign:w.halign},u,{onBeforeExpand:function(){if(u.onBeforeExpand){if(u.onBeforeExpand.call(this)==false){return false}}if(!w.multiple){var z=e.grep(h(r),function(B){return B.panel("options").collapsible});for(var t=0;t<z.length;t++){a(r,p(r,z[t]))}}var A=e(this).panel("header");A.addClass("accordion-header-selected");A.find(".accordion-collapse").removeClass("accordion-expand")},onExpand:function(){e(r).find(">.panel-last>.accordion-header").removeClass("accordion-header-border");if(u.onExpand){u.onExpand.call(this)}w.onSelect.call(r,e(this).panel("options").title,p(r,this))},onBeforeCollapse:function(){if(u.onBeforeCollapse){if(u.onBeforeCollapse.call(this)==false){return false}}e(r).find(">.panel-last>.accordion-header").addClass("accordion-header-border");var t=e(this).panel("header");t.removeClass("accordion-header-selected");t.find(".accordion-collapse").addClass("accordion-expand")},onCollapse:function(){if(isNaN(parseInt(w.height))){e(r).find(">.panel-last>.accordion-header").removeClass("accordion-header-border")}if(u.onCollapse){u.onCollapse.call(this)}w.onUnselect.call(r,e(this).panel("options").title,p(r,this))}}));var y=q.panel("header");var s=y.children("div.panel-tool");s.children("a.panel-tool-collapse").hide();var v=e('<a href="javascript:;"></a>').addClass("accordion-collapse accordion-expand").appendTo(s);v.bind("click",function(){x(q);return false});q.panel("options").collapsible?v.show():v.hide();if(w.halign=="left"||w.halign=="right"){v.hide()}y.click(function(){x(q);return false});function x(A){var z=A.panel("options");if(z.collapsible){var t=p(r,A);if(z.collapsed){i(r,t)}else{a(r,t)}}}}function i(q,t){var s=g(q,t);if(!s){return}b(q);var r=e.data(q,"accordion").options;s.panel("expand",r.animate)}function a(q,t){var s=g(q,t);if(!s){return}b(q);var r=e.data(q,"accordion").options;s.panel("collapse",r.animate)}function m(q){var s=e.data(q,"accordion").options;e(q).find(">.panel-last>.accordion-header").addClass("accordion-header-border");var t=o(q,"selected",true);if(t){r(p(q,t))}else{r(s.selected)}function r(v){var u=s.animate;s.animate=false;i(q,v);s.animate=u}}function b(q){var r=e.data(q,"accordion").panels;for(var s=0;s<r.length;s++){r[s].stop(true,true)}}function l(r,t){var v=e.data(r,"accordion");var u=v.options;var s=v.panels;if(t.selected==undefined){t.selected=true}b(r);var q=e("<div></div>").appendTo(r);s.push(q);j(r,q,t);f(r);u.onAdd.call(r,t.title,s.length-1);if(t.selected){i(r,s.length-1)}}function d(t,u){var s=e.data(t,"accordion");var q=s.options;var w=s.panels;b(t);var r=g(t,u);var x=r.panel("options").title;var v=p(t,r);if(!r){return}if(q.onBeforeRemove.call(t,x,v)==false){return}w.splice(v,1);r.panel("destroy");if(w.length){f(t);var y=k(t);if(!y){i(t,0)}}q.onRemove.call(t,x,v)}e.fn.accordion=function(q,r){if(typeof q=="string"){return e.fn.accordion.methods[q](this,r)}q=q||{};return this.each(function(){var s=e.data(this,"accordion");if(s){e.extend(s.options,q)}else{e.data(this,"accordion",{options:e.extend({},e.fn.accordion.defaults,e.fn.accordion.parseOptions(this),q),accordion:e(this).addClass("accordion"),panels:[]});n(this)}c(this);f(this);m(this)})};e.fn.accordion.methods={options:function(q){return e.data(q[0],"accordion").options},panels:function(q){return e.data(q[0],"accordion").panels},resize:function(r,q){return r.each(function(){f(this,q)})},getSelections:function(q){return h(q[0])},getSelected:function(q){return k(q[0])},getPanel:function(r,q){return g(r[0],q)},getPanelIndex:function(r,q){return p(r[0],q)},select:function(r,q){return r.each(function(){i(this,q)})},unselect:function(r,q){return r.each(function(){a(this,q)})},add:function(r,q){return r.each(function(){l(this,q)})},remove:function(r,q){return r.each(function(){d(this,q)})}};e.fn.accordion.parseOptions=function(r){var q=e(r);return e.extend({},e.parser.parseOptions(r,["width","height","halign",{fit:"boolean",border:"boolean",animate:"boolean",multiple:"boolean",selected:"number"}]))};e.fn.accordion.defaults={width:"auto",height:"auto",fit:false,border:true,animate:true,multiple:false,selected:0,halign:"top",onSelect:function(r,q){},onUnselect:function(r,q){},onAdd:function(r,q){},onBeforeRemove:function(r,q){},onRemove:function(r,q){}}})(jQuery);