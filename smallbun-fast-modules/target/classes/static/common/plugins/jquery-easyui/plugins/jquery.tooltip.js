(function(e){function i(j){e(j).addClass("tooltip-f")}function h(k){var j=e.data(k,"tooltip").options;e(k).unbind(".tooltip").bind(j.showEvent+".tooltip",function(l){e(k).tooltip("show",l)}).bind(j.hideEvent+".tooltip",function(l){e(k).tooltip("hide",l)}).bind("mousemove.tooltip",function(l){if(j.trackMouse){j.trackMouseX=l.pageX;j.trackMouseY=l.pageY;e(k).tooltip("reposition")}})}function g(k){var j=e.data(k,"tooltip");if(j.showTimer){clearTimeout(j.showTimer);j.showTimer=null}if(j.hideTimer){clearTimeout(j.hideTimer);j.hideTimer=null}}function f(n){var m=e.data(n,"tooltip");if(!m||!m.tip){return}var l=m.options;var k=m.tip;var j={left:-100000,top:-100000};if(e(n).is(":visible")){j=o(l.position);if(l.position=="top"&&j.top<0){j=o("bottom")}else{if((l.position=="bottom")&&(j.top+k._outerHeight()>e(window)._outerHeight()+e(document).scrollTop())){j=o("top")}}if(j.left<0){if(l.position=="left"){j=o("right")}else{e(n).tooltip("arrow").css("left",k._outerWidth()/2+j.left);j.left=0}}else{if(j.left+k._outerWidth()>e(window)._outerWidth()+e(document)._scrollLeft()){if(l.position=="right"){j=o("left")}else{var p=j.left;j.left=e(window)._outerWidth()+e(document)._scrollLeft()-k._outerWidth();e(n).tooltip("arrow").css("left",k._outerWidth()/2-(j.left-p))}}}}k.css({left:j.left,top:j.top,zIndex:(l.zIndex!=undefined?l.zIndex:(e.fn.window?e.fn.window.defaults.zIndex++:""))});l.onPosition.call(n,j.left,j.top);function o(w){l.position=w||"bottom";k.removeClass("tooltip-top tooltip-bottom tooltip-left tooltip-right").addClass("tooltip-"+l.position);var v,u;var s=e.isFunction(l.deltaX)?l.deltaX.call(n,l.position):l.deltaX;var r=e.isFunction(l.deltaY)?l.deltaY.call(n,l.position):l.deltaY;if(l.trackMouse){q=e();v=l.trackMouseX+s;u=l.trackMouseY+r}else{var q=e(n);v=q.offset().left+s;u=q.offset().top+r}switch(l.position){case"right":v+=q._outerWidth()+12+(l.trackMouse?12:0);if(l.valign=="middle"){u-=(k._outerHeight()-q._outerHeight())/2}break;case"left":v-=k._outerWidth()+12+(l.trackMouse?12:0);if(l.valign=="middle"){u-=(k._outerHeight()-q._outerHeight())/2}break;case"top":v-=(k._outerWidth()-q._outerWidth())/2;u-=k._outerHeight()+12+(l.trackMouse?12:0);break;case"bottom":v-=(k._outerWidth()-q._outerWidth())/2;u+=q._outerHeight()+12+(l.trackMouse?12:0);break}return{left:v,top:u}}}function c(l,n){var k=e.data(l,"tooltip");var j=k.options;var m=k.tip;if(!m){m=e('<div tabindex="-1" class="tooltip"><div class="tooltip-content"></div><div class="tooltip-arrow-outer"></div><div class="tooltip-arrow"></div></div>').appendTo("body");k.tip=m;b(l)}g(l);k.showTimer=setTimeout(function(){e(l).tooltip("reposition");m.show();j.onShow.call(l,n);var p=m.children(".tooltip-arrow-outer");var o=m.children(".tooltip-arrow");var q="border-"+j.position+"-color";p.add(o).css({borderTopColor:"",borderBottomColor:"",borderLeftColor:"",borderRightColor:""});p.css(q,m.css(q));o.css(q,m.css("backgroundColor"))},j.showDelay)}function d(k,l){var j=e.data(k,"tooltip");if(j&&j.tip){g(k);j.hideTimer=setTimeout(function(){j.tip.hide();j.options.onHide.call(k,l)},j.options.hideDelay)}}function b(k,l){var j=e.data(k,"tooltip");var n=j.options;if(l){n.content=l}if(!j.tip){return}var m=typeof n.content=="function"?n.content.call(k):n.content;j.tip.children(".tooltip-content").html(m);n.onUpdate.call(k,m)}function a(l){var k=e.data(l,"tooltip");if(k){g(l);var j=k.options;if(k.tip){k.tip.remove()}if(j._title){e(l).attr("title",j._title)}e.removeData(l,"tooltip");e(l).unbind(".tooltip").removeClass("tooltip-f");j.onDestroy.call(l)}}e.fn.tooltip=function(k,j){if(typeof k=="string"){return e.fn.tooltip.methods[k](this,j)}k=k||{};return this.each(function(){var l=e.data(this,"tooltip");if(l){e.extend(l.options,k)}else{e.data(this,"tooltip",{options:e.extend({},e.fn.tooltip.defaults,e.fn.tooltip.parseOptions(this),k)});i(this)}h(this);b(this)})};e.fn.tooltip.methods={options:function(j){return e.data(j[0],"tooltip").options},tip:function(j){return e.data(j[0],"tooltip").tip},arrow:function(j){return j.tooltip("tip").children(".tooltip-arrow-outer,.tooltip-arrow")},show:function(k,j){return k.each(function(){c(this,j)})},hide:function(k,j){return k.each(function(){d(this,j)})},update:function(k,j){return k.each(function(){b(this,j)})},reposition:function(j){return j.each(function(){f(this)})},destroy:function(j){return j.each(function(){a(this)})}};e.fn.tooltip.parseOptions=function(l){var j=e(l);var k=e.extend({},e.parser.parseOptions(l,["position","showEvent","hideEvent","content",{trackMouse:"boolean",deltaX:"number",deltaY:"number",showDelay:"number",hideDelay:"number"}]),{_title:j.attr("title")});j.attr("title","");if(!k.content){k.content=k._title}return k};e.fn.tooltip.defaults={position:"bottom",valign:"middle",content:null,trackMouse:false,deltaX:0,deltaY:0,showEvent:"mouseenter",hideEvent:"mouseleave",showDelay:200,hideDelay:100,onShow:function(j){},onHide:function(j){},onUpdate:function(j){},onPosition:function(j,k){},onDestroy:function(){}}})(jQuery);