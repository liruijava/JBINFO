(function(d){function e(i){var h=d.data(i,"timespinner").options;d(i).addClass("timespinner-f").spinner(h);var g=h.formatter.call(i,h.parser.call(i,h.value));d(i).timespinner("initValue",g)}function b(m){var k=m.data.target;var j=d.data(k,"timespinner").options;var h=d(k).timespinner("getSelectionStart");for(var l=0;l<j.selections.length;l++){var g=j.selections[l];if(h>=g[0]&&h<=g[1]){a(k,l);return}}}function a(k,j){var i=d.data(k,"timespinner").options;if(j!=undefined){i.highlight=j}var g=i.selections[i.highlight];if(g){var h=d(k).timespinner("textbox");d(k).timespinner("setSelectionRange",{start:g[0],end:g[1]});h.focus()}}function f(j,i){var h=d.data(j,"timespinner").options;var i=h.parser.call(j,i);var g=h.formatter.call(j,i);d(j).spinner("setValue",g)}function c(j,i){var h=d.data(j,"timespinner").options;var o=d(j).timespinner("getValue");var g=h.selections[h.highlight];var n=o.substring(0,g[0]);var l=o.substring(g[0],g[1]);var k=o.substring(g[1]);var m=n+((parseInt(l,10)||0)+h.increment*(i?-1:1))+k;d(j).timespinner("setValue",m);a(j)}d.fn.timespinner=function(g,i){if(typeof g=="string"){var h=d.fn.timespinner.methods[g];if(h){return h(this,i)}else{return this.spinner(g,i)}}g=g||{};return this.each(function(){var j=d.data(this,"timespinner");if(j){d.extend(j.options,g)}else{d.data(this,"timespinner",{options:d.extend({},d.fn.timespinner.defaults,d.fn.timespinner.parseOptions(this),g)})}e(this)})};d.fn.timespinner.methods={options:function(h){var g=h.data("spinner")?h.spinner("options"):{};return d.extend(d.data(h[0],"timespinner").options,{width:g.width,value:g.value,originalValue:g.originalValue,disabled:g.disabled,readonly:g.readonly})},setValue:function(h,g){return h.each(function(){f(this,g)})},getHours:function(i){var g=d.data(i[0],"timespinner").options;var h=g.parser.call(i[0],i.timespinner("getValue"));return h?h.getHours():null},getMinutes:function(i){var g=d.data(i[0],"timespinner").options;var h=g.parser.call(i[0],i.timespinner("getValue"));return h?h.getMinutes():null},getSeconds:function(i){var h=d.data(i[0],"timespinner").options;var g=h.parser.call(i[0],i.timespinner("getValue"));return g?g.getSeconds():null}};d.fn.timespinner.parseOptions=function(g){return d.extend({},d.fn.spinner.parseOptions(g),d.parser.parseOptions(g,["separator",{showSeconds:"boolean",highlight:"number"}]))};d.fn.timespinner.defaults=d.extend({},d.fn.spinner.defaults,{inputEvents:d.extend({},d.fn.spinner.defaults.inputEvents,{click:function(g){b.call(this,g)},blur:function(h){var g=d(h.data.target);g.timespinner("setValue",g.timespinner("getText"))},keydown:function(h){if(h.keyCode==13){var g=d(h.data.target);g.timespinner("setValue",g.timespinner("getText"))}}}),formatter:function(j){if(!j){return""}var i=d(this).timespinner("options");var h=[g(j.getHours()),g(j.getMinutes())];if(i.showSeconds){h.push(g(j.getSeconds()))}return h.join(i.separator);function g(k){return(k<10?"0":"")+k}},parser:function(j){var l=d(this).timespinner("options");var k=i(j);if(k){var h=i(l.min);var g=i(l.max);if(h&&h>k){k=h}if(g&&g<k){k=g}}return k;function i(n){if(!n){return null}var m=n.split(l.separator);return new Date(1900,0,0,parseInt(m[0],10)||0,parseInt(m[1],10)||0,parseInt(m[2],10)||0)}},selections:[[0,2],[3,5],[6,8]],separator:":",showSeconds:false,highlight:0,spin:function(g){c(this,g)}})})(jQuery);