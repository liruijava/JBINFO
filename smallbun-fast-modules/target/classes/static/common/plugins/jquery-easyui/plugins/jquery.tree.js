(function(B){function x(T){var S=B(T);S.addClass("tree");return S}function t(T){var S=B.data(T,"tree").options;B(T).unbind().bind("mouseover",function(W){var V=B(W.target);var U=V.closest("div.tree-node");if(!U.length){return}U.addClass("tree-node-hover");if(V.hasClass("tree-hit")){if(V.hasClass("tree-expanded")){V.addClass("tree-expanded-hover")}else{V.addClass("tree-collapsed-hover")}}W.stopPropagation()}).bind("mouseout",function(W){var V=B(W.target);var U=V.closest("div.tree-node");if(!U.length){return}U.removeClass("tree-node-hover");if(V.hasClass("tree-hit")){if(V.hasClass("tree-expanded")){V.removeClass("tree-expanded-hover")}else{V.removeClass("tree-collapsed-hover")}}W.stopPropagation()}).bind("click",function(W){var V=B(W.target);var U=V.closest("div.tree-node");if(!U.length){return}if(V.hasClass("tree-hit")){g(T,U[0]);return false}else{if(V.hasClass("tree-checkbox")){G(T,U[0]);return false}else{q(T,U[0]);S.onClick.call(T,O(T,U[0]))}}W.stopPropagation()}).bind("dblclick",function(V){var U=B(V.target).closest("div.tree-node");if(!U.length){return}q(T,U[0]);S.onDblClick.call(T,O(T,U[0]));V.stopPropagation()}).bind("contextmenu",function(V){var U=B(V.target).closest("div.tree-node");if(!U.length){return}S.onContextMenu.call(T,V,O(T,U[0]));V.stopPropagation()})}function N(S){var U=B.data(S,"tree").options;U.dnd=false;var T=B(S).find("div.tree-node");T.draggable("disable");T.css("cursor","pointer")}function y(Z){var Y=B.data(Z,"tree");var W=Y.options;var U=Y.tree;Y.disabledNodes=[];W.dnd=true;U.find("div.tree-node").draggable({disabled:false,revert:true,cursor:"pointer",proxy:function(aa){var ab=B('<div class="tree-node-proxy"></div>').appendTo("body");ab.html('<span class="tree-dnd-icon tree-dnd-no">&nbsp;</span>'+B(aa).find(".tree-title").html());ab.hide();return ab},deltaX:15,deltaY:15,onBeforeDrag:function(ab){if(W.onBeforeDrag.call(Z,O(Z,this))==false){return false}if(B(ab.target).hasClass("tree-hit")||B(ab.target).hasClass("tree-checkbox")){return false}if(ab.which!=1){return false}var aa=B(this).find("span.tree-indent");if(aa.length){ab.data.offsetWidth-=aa.length*aa.width()}},onStartDrag:function(ab){B(this).next("ul").find("div.tree-node").each(function(){B(this).droppable("disable");Y.disabledNodes.push(this)});B(this).draggable("proxy").css({left:-10000,top:-10000});W.onStartDrag.call(Z,O(Z,this));var aa=O(Z,this);if(aa.id==undefined){aa.id="easyui_tree_node_id_temp";L(Z,aa)}Y.draggingNodeId=aa.id},onDrag:function(ae){var ab=ae.pageX,ad=ae.pageY,aa=ae.data.startX,ac=ae.data.startY;var af=Math.sqrt((ab-aa)*(ab-aa)+(ad-ac)*(ad-ac));if(af>3){B(this).draggable("proxy").show()}this.pageY=ae.pageY},onStopDrag:function(){for(var ab=0;ab<Y.disabledNodes.length;ab++){B(Y.disabledNodes[ab]).droppable("enable")}Y.disabledNodes=[];var aa=K(Z,Y.draggingNodeId);if(aa&&aa.id=="easyui_tree_node_id_temp"){aa.id="";L(Z,aa)}W.onStopDrag.call(Z,aa)}}).droppable({accept:"div.tree-node",onDragEnter:function(ab,aa){if(W.onDragEnter.call(Z,this,T(aa))==false){S(aa,false);B(this).removeClass("tree-node-append tree-node-top tree-node-bottom");B(this).droppable("disable");Y.disabledNodes.push(this)}},onDragOver:function(ae,ac){if(B(this).droppable("options").disabled){return}var ab=ac.pageY;var ad=B(this).offset().top;var aa=ad+B(this).outerHeight();S(ac,true);B(this).removeClass("tree-node-append tree-node-top tree-node-bottom");if(ab>ad+(aa-ad)/2){if(aa-ab<5){B(this).addClass("tree-node-bottom")}else{B(this).addClass("tree-node-append")}}else{if(ab-ad<5){B(this).addClass("tree-node-top")}else{B(this).addClass("tree-node-append")}}if(W.onDragOver.call(Z,this,T(ac))==false){S(ac,false);B(this).removeClass("tree-node-append tree-node-top tree-node-bottom");B(this).droppable("disable");Y.disabledNodes.push(this)}},onDragLeave:function(ab,aa){S(aa,false);B(this).removeClass("tree-node-append tree-node-top tree-node-bottom");W.onDragLeave.call(Z,this,T(aa))},onDrop:function(ac,aa){var ae=this;var ad,ab;if(B(this).hasClass("tree-node-append")){ad=X;ab="append"}else{ad=V;ab=B(this).hasClass("tree-node-top")?"top":"bottom"}if(W.onBeforeDrop.call(Z,ae,T(aa),ab)==false){B(this).removeClass("tree-node-append tree-node-top tree-node-bottom");return}ad(aa,ae,ab);B(this).removeClass("tree-node-append tree-node-top tree-node-bottom")}});function T(ab,aa){return B(ab).closest("ul.tree").tree(aa?"pop":"getData",ab)}function S(ab,aa){var ac=B(ab).draggable("proxy").find("span.tree-dnd-icon");ac.removeClass("tree-dnd-yes tree-dnd-no").addClass(aa?"tree-dnd-yes":"tree-dnd-no")}function X(ac,ab){if(O(Z,ab).state=="closed"){u(Z,ab,function(){aa()})}else{aa()}function aa(){var ad=T(ac,true);B(Z).tree("append",{parent:ab,data:[ad]});W.onDrop.call(Z,ab,ad,"append")}}function V(ad,ae,ac){var ab={};if(ac=="top"){ab.before=ae}else{ab.after=ae}var aa=T(ad,true);ab.data=aa;B(Z).tree("insert",ab);W.onDrop.call(Z,ae,aa,ac)}}function G(Z,X,V,U){var T=B.data(Z,"tree");var Y=T.options;if(!Y.checkbox){return}var W=O(Z,X);if(!W.checkState){return}var S=B(X).find(".tree-checkbox");if(V==undefined){if(S.hasClass("tree-checkbox1")){V=false}else{if(S.hasClass("tree-checkbox0")){V=true}else{if(W._checked==undefined){W._checked=B(X).find(".tree-checkbox").hasClass("tree-checkbox1")}V=!W._checked}}}W._checked=V;if(V){if(S.hasClass("tree-checkbox1")){return}}else{if(S.hasClass("tree-checkbox0")){return}}if(!U){if(Y.onBeforeCheck.call(Z,W,V)==false){return}}if(Y.cascadeCheck){o(Z,W,V);m(Z,W)}else{l(Z,W,V?"1":"0")}if(!U){Y.onCheck.call(Z,W,V)}}function o(Y,Z,X){var V=B.data(Y,"tree").options;var U=X?1:0;l(Y,Z,U);if(V.deepCheck){B.easyui.forEach(Z.children||[],true,function(aa){l(Y,aa,U)})}else{var T=[];if(Z.children&&Z.children.length){T.push(Z)}B.easyui.forEach(Z.children||[],true,function(aa){if(!aa.hidden){l(Y,aa,U);if(aa.children&&aa.children.length){T.push(aa)}}});for(var W=T.length-1;W>=0;W--){var S=T[W];l(Y,S,v(S))}}}function l(W,V,U){var S=B.data(W,"tree").options;if(!V.checkState||U==undefined){return}if(V.hidden&&!S.deepCheck){return}var T=B("#"+V.domId).find(".tree-checkbox");V.checkState=["unchecked","checked","indeterminate"][U];V.checked=(V.checkState=="checked");T.removeClass("tree-checkbox0 tree-checkbox1 tree-checkbox2");T.addClass("tree-checkbox"+U)}function m(U,T){var S=Q(U,B("#"+T.domId)[0]);if(S){l(U,S,v(S));m(U,S)}}function v(W){var U=0;var T=0;var S=0;B.easyui.forEach(W.children||[],false,function(X){if(X.checkState){S++;if(X.checkState=="checked"){T++}else{if(X.checkState=="unchecked"){U++}}}});if(S==0){return undefined}var V=0;if(U==S){V=0}else{if(T==S){V=1}else{V=2}}return V}function P(Y,X){var W=B.data(Y,"tree").options;if(!W.checkbox){return}var V=B(X);var T=V.find(".tree-checkbox");var U=O(Y,X);if(W.view.hasCheckbox(Y,U)){if(!T.length){U.checkState=U.checkState||"unchecked";B('<span class="tree-checkbox"></span>').insertBefore(V.find(".tree-title"))}if(U.checkState=="checked"){G(Y,X,true,true)}else{if(U.checkState=="unchecked"){G(Y,X,false,true)}else{var S=v(U);if(S===0){G(Y,X,false,true)}else{if(S===1){G(Y,X,true,true)}}}}}else{T.remove();U.checkState=undefined;U.checked=undefined;m(Y,U)}}function d(X,T,V,U,ab){var aa=B.data(X,"tree");var Z=aa.options;var Y=B(T).prevAll("div.tree-node:first");V=Z.loadFilter.call(X,V,Y[0]);var W=C(X,"domId",Y.attr("id"));if(!U){W?W.children=V:aa.data=V;B(T).empty()}else{if(W){W.children?W.children=W.children.concat(V):W.children=V}else{aa.data=aa.data.concat(V)}}Z.view.render.call(Z.view,X,T,V);if(Z.dnd){y(X)}if(W){L(X,W)}for(var S=0;S<aa.tmpIds.length;S++){G(X,B("#"+aa.tmpIds[S])[0],true,true)}aa.tmpIds=[];setTimeout(function(){J(X,X)},0);if(!ab){Z.onLoadSuccess.call(X,W,V)}}function J(Z,W,Y){var X=B.data(Z,"tree").options;if(X.lines){B(Z).addClass("tree-lines")}else{B(Z).removeClass("tree-lines");return}if(!Y){Y=true;B(Z).find("span.tree-indent").removeClass("tree-line tree-join tree-joinbottom");B(Z).find("div.tree-node").removeClass("tree-node-last tree-root-first tree-root-one");var V=B(Z).tree("getRoots");if(V.length>1){B(V[0].target).addClass("tree-root-first")}else{if(V.length==1){B(V[0].target).addClass("tree-root-one")}}}B(W).children("li").each(function(){var aa=B(this).children("div.tree-node");var ab=aa.next("ul");if(ab.length){if(B(this).next().length){U(aa)}J(Z,ab,Y)}else{T(aa)}});var S=B(W).children("li:last").children("div.tree-node").addClass("tree-node-last");S.children("span.tree-join").removeClass("tree-join").addClass("tree-joinbottom");function T(ac,ab){var aa=ac.find("span.tree-icon");aa.prev("span.tree-indent").addClass("tree-join")}function U(ab){var aa=ab.find("span.tree-indent, span.tree-hit").length;ab.next().find("div.tree-node").each(function(){B(this).children("span:eq("+(aa-1)+")").addClass("tree-line")})}}function n(Z,aa,Y,X){var W=B.data(Z,"tree").options;Y=B.extend({},W.queryParams,Y||{});var V=null;if(Z!=aa){var U=B(aa).prev();V=O(Z,U[0])}if(W.onBeforeLoad.call(Z,V,Y)==false){return}var T=B(aa).prev().children("span.tree-folder");T.addClass("tree-loading");var S=W.loader.call(Z,Y,function(ab){T.removeClass("tree-loading");d(Z,aa,ab);if(X){X()}},function(){T.removeClass("tree-loading");W.onLoadError.apply(Z,arguments);if(X){X()}});if(S==false){T.removeClass("tree-loading")}}function u(Y,X,W){var U=B.data(Y,"tree").options;var Z=B(X).children("span.tree-hit");if(Z.length==0){return}if(Z.hasClass("tree-expanded")){return}var T=O(Y,X);if(U.onBeforeExpand.call(Y,T)==false){return}Z.removeClass("tree-collapsed tree-collapsed-hover").addClass("tree-expanded");Z.next().addClass("tree-folder-open");var V=B(X).next();if(V.length){if(U.animate){V.slideDown("normal",function(){T.state="open";U.onExpand.call(Y,T);if(W){W()}})}else{V.css("display","block");T.state="open";U.onExpand.call(Y,T);if(W){W()}}}else{var S=B('<ul style="display:none"></ul>').insertAfter(X);n(Y,S[0],{id:T.id},function(){if(S.is(":empty")){S.remove()}if(U.animate){S.slideDown("normal",function(){T.state="open";U.onExpand.call(Y,T);if(W){W()}})}else{S.css("display","block");T.state="open";U.onExpand.call(Y,T);if(W){W()}}})}}function j(T,S){var X=B.data(T,"tree").options;var V=B(S).children("span.tree-hit");if(V.length==0){return}if(V.hasClass("tree-collapsed")){return}var W=O(T,S);if(X.onBeforeCollapse.call(T,W)==false){return}V.removeClass("tree-expanded tree-expanded-hover").addClass("tree-collapsed");V.next().removeClass("tree-folder-open");var U=B(S).next();if(X.animate){U.slideUp("normal",function(){W.state="closed";X.onCollapse.call(T,W)})}else{U.css("display","none");W.state="closed";X.onCollapse.call(T,W)}}function g(U,S){var T=B(S).children("span.tree-hit");if(T.length==0){return}if(T.hasClass("tree-expanded")){j(U,S)}else{u(U,S)}}function e(T,V){var U=E(T,V);if(V){U.unshift(O(T,V))}for(var S=0;S<U.length;S++){u(T,U[S].target)}}function D(V,S){var U=[];var W=Q(V,S);while(W){U.unshift(W);W=Q(V,W.target)}for(var T=0;T<U.length;T++){u(V,U[T].target)}}function M(U,T){var X=B(U).parent();while(X[0].tagName!="BODY"&&X.css("overflow-y")!="auto"){X=X.parent()}var W=B(T);var S=W.offset().top;if(X[0].tagName!="BODY"){var V=X.offset().top;if(S<V){X.scrollTop(X.scrollTop()+S-V)}else{if(S+W.outerHeight()>V+X.outerHeight()-18){X.scrollTop(X.scrollTop()+S+W.outerHeight()-V-X.outerHeight()+18)}}}else{X.scrollTop(S)}}function H(V,U){var T=E(V,U);if(U){T.unshift(O(V,U))}for(var S=0;S<T.length;S++){j(V,T[S].target)}}function r(Y,X){var W=B(X.parent);var T=X.data;if(!T){return}T=B.isArray(T)?T:[T];if(!T.length){return}var S;if(W.length==0){S=B(Y)}else{if(p(Y,W[0])){var V=W.find("span.tree-icon");V.removeClass("tree-file").addClass("tree-folder tree-folder-open");var U=B('<span class="tree-hit tree-expanded"></span>').insertBefore(V);if(U.prev().length){U.prev().remove()}}S=W.next();if(!S.length){S=B("<ul></ul>").insertAfter(W)}}d(Y,S[0],T,true,true)}function I(Z,Y){var S=Y.before||Y.after;var X=Q(Z,S);var W=Y.data;if(!W){return}W=B.isArray(W)?W:[W];if(!W.length){return}r(Z,{parent:(X?X.target:null),data:W});var V=X?X.children:B(Z).tree("getRoots");for(var U=0;U<V.length;U++){if(V[U].domId==B(S).attr("id")){for(var T=W.length-1;T>=0;T--){V.splice((Y.before?U:(U+1)),0,W[T])}V.splice(V.length-W.length,W.length);break}}var aa=B();for(var U=0;U<W.length;U++){aa=aa.add(B("#"+W[U].domId).parent())}if(Y.before){aa.insertBefore(B(S).parent())}else{aa.insertAfter(B(S).parent())}}function F(W,V){var U=S(V);B(V).parent().remove();if(U){if(!U.children||!U.children.length){var T=B(U.target);T.find(".tree-icon").removeClass("tree-folder").addClass("tree-file");T.find(".tree-hit").remove();B('<span class="tree-indent"></span>').prependTo(T);T.next().remove()}L(W,U)}J(W,W);function S(X){var ab=B(X).attr("id");var aa=Q(W,X);var Z=aa?aa.children:B.data(W,"tree").data;for(var Y=0;Y<Z.length;Y++){if(Z[Y].domId==ab){Z.splice(Y,1);break}}return aa}}function L(W,U){var V=B.data(W,"tree").options;var T=B(U.target);var S=O(W,U.target);if(S.iconCls){T.find(".tree-icon").removeClass(S.iconCls)}B.extend(S,U);T.find(".tree-title").html(V.formatter.call(W,S));if(S.iconCls){T.find(".tree-icon").addClass(S.iconCls)}P(W,U.target)}function w(U,T){if(T){var V=Q(U,T);while(V){T=V.target;V=Q(U,T)}return O(U,T)}else{var S=s(U);return S.length?S[0]:null}}function s(T){var S=B.data(T,"tree").data;for(var U=0;U<S.length;U++){R(S[U])}return S}function E(V,U){var T=[];var W=O(V,U);var S=W?(W.children||[]):B.data(V,"tree").data;B.easyui.forEach(S,true,function(X){T.push(R(X))});return T}function Q(S,U){var T=B(U).closest("ul").prevAll("div.tree-node:first");return O(S,T[0])}function h(U,T){T=T||"checked";if(!B.isArray(T)){T=[T]}var S=[];B.easyui.forEach(B.data(U,"tree").data,true,function(V){if(V.checkState&&B.easyui.indexOfArray(T,V.checkState)!=-1){S.push(R(V))}});return S}function c(T){var S=B(T).find("div.tree-node-selected");return S.length?O(T,S[0]):null}function b(U,T){var S=O(U,T);if(S&&S.children){B.easyui.forEach(S.children,true,function(V){R(V)})}return S}function O(T,S){return C(T,"domId",B(S).attr("id"))}function K(T,S){if(B.isFunction(S)){var U=S}else{var S=typeof S=="object"?S:{id:S};var U=function(Y){for(var X in S){if(Y[X]!=S[X]){return false}}return true}}var W=null;var V=B.data(T,"tree").data;B.easyui.forEach(V,true,function(X){if(U.call(T,X)==true){W=R(X);return false}});return W}function C(U,T,S){var V={};V[T]=S;return K(U,V)}function R(S){S.target=B("#"+S.domId)[0];return S}function q(V,U){var S=B.data(V,"tree").options;var T=O(V,U);if(S.onBeforeSelect.call(V,T)==false){return}B(V).find("div.tree-node-selected").removeClass("tree-node-selected");B(U).addClass("tree-node-selected");S.onSelect.call(V,T)}function p(T,S){return B(S).children("span.tree-hit").length==0}function A(S,Y){var X=B.data(S,"tree").options;var W=O(S,Y);if(X.onBeforeEdit.call(S,W)==false){return}B(Y).css("position","relative");var T=B(Y).find(".tree-title");var V=T.outerWidth();T.empty();var U=B('<input class="tree-editor">').appendTo(T);U.val(W.text).focus();U.width(V+20);U._outerHeight(X.editorHeight);U.bind("click",function(Z){return false}).bind("mousedown",function(Z){Z.stopPropagation()}).bind("mousemove",function(Z){Z.stopPropagation()}).bind("keydown",function(Z){if(Z.keyCode==13){a(S,Y);return false}else{if(Z.keyCode==27){i(S,Y);return false}}}).bind("blur",function(Z){Z.stopPropagation();a(S,Y)})}function a(X,V){var U=B.data(X,"tree").options;B(V).css("position","");var T=B(V).find("input.tree-editor");var W=T.val();T.remove();var S=O(X,V);S.text=W;L(X,S);U.onAfterEdit.call(X,S)}function i(V,U){var T=B.data(V,"tree").options;B(U).css("position","");B(U).find("input.tree-editor").remove();var S=O(V,U);L(V,S);T.onCancelEdit.call(V,S)}function f(S,V){var Y=B.data(S,"tree");var W=Y.options;var U={};B.easyui.forEach(Y.data,true,function(Z){if(W.filter.call(S,V,Z)){B("#"+Z.domId).removeClass("tree-node-hidden");U[Z.domId]=1;Z.hidden=false}else{B("#"+Z.domId).addClass("tree-node-hidden");Z.hidden=true}});for(var X in U){T(X)}function T(Z){var aa=B(S).tree("getParent",B("#"+Z)[0]);while(aa){B(aa.target).removeClass("tree-node-hidden");aa.hidden=false;aa=B(S).tree("getParent",aa.target)}}}B.fn.tree=function(T,S){if(typeof T=="string"){return B.fn.tree.methods[T](this,S)}var T=T||{};return this.each(function(){var W=B.data(this,"tree");var V;if(W){V=B.extend(W.options,T);W.options=V}else{V=B.extend({},B.fn.tree.defaults,B.fn.tree.parseOptions(this),T);B.data(this,"tree",{options:V,tree:x(this),data:[],tmpIds:[]});var U=B.fn.tree.parseData(this);if(U.length){d(this,this,U)}}t(this);if(V.data){d(this,this,B.extend(true,[],V.data))}n(this,this)})};B.fn.tree.methods={options:function(S){return B.data(S[0],"tree").options},loadData:function(T,S){return T.each(function(){d(this,this,S)})},getNode:function(T,S){return O(T[0],S)},getData:function(T,S){return b(T[0],S)},reload:function(T,S){return T.each(function(){if(S){var U=B(S);var V=U.children("span.tree-hit");V.removeClass("tree-expanded tree-expanded-hover").addClass("tree-collapsed");U.next().remove();u(this,S)}else{B(this).empty();n(this,this)}})},getRoot:function(T,S){return w(T[0],S)},getRoots:function(S){return s(S[0])},getParent:function(T,S){return Q(T[0],S)},getChildren:function(T,S){return E(T[0],S)},getChecked:function(T,S){return h(T[0],S)},getSelected:function(S){return c(S[0])},isLeaf:function(T,S){return p(T[0],S)},find:function(T,S){return K(T[0],S)},findBy:function(T,S){return C(T[0],S.field,S.value)},select:function(T,S){return T.each(function(){q(this,S)})},check:function(T,S){return T.each(function(){G(this,S,true)})},uncheck:function(T,S){return T.each(function(){G(this,S,false)})},collapse:function(T,S){return T.each(function(){j(this,S)})},expand:function(T,S){return T.each(function(){u(this,S)})},collapseAll:function(T,S){return T.each(function(){H(this,S)})},expandAll:function(T,S){return T.each(function(){e(this,S)})},expandTo:function(T,S){return T.each(function(){D(this,S)})},scrollTo:function(T,S){return T.each(function(){M(this,S)})},toggle:function(T,S){return T.each(function(){g(this,S)})},append:function(T,S){return T.each(function(){r(this,S)})},insert:function(T,S){return T.each(function(){I(this,S)})},remove:function(T,S){return T.each(function(){F(this,S)})},pop:function(U,S){var T=U.tree("getData",S);U.tree("remove",S);return T},update:function(T,S){return T.each(function(){L(this,B.extend({},S,{checkState:S.checked?"checked":(S.checked===false?"unchecked":undefined)}))})},enableDnd:function(S){return S.each(function(){y(this)})},disableDnd:function(S){return S.each(function(){N(this)})},beginEdit:function(T,S){return T.each(function(){A(this,S)})},endEdit:function(T,S){return T.each(function(){a(this,S)})},cancelEdit:function(T,S){return T.each(function(){i(this,S)})},doFilter:function(T,S){return T.each(function(){f(this,S)})}};B.fn.tree.parseOptions=function(S){var T=B(S);return B.extend({},B.parser.parseOptions(S,["url","method",{checkbox:"boolean",cascadeCheck:"boolean",onlyLeafCheck:"boolean"},{animate:"boolean",lines:"boolean",dnd:"boolean"}]))};B.fn.tree.parseData=function(T){var U=[];S(U,B(T));return U;function S(W,V){V.children("li").each(function(){var Y=B(this);var X=B.extend({},B.parser.parseOptions(this,["id","iconCls","state"]),{checked:(Y.attr("checked")?true:undefined)});X.text=Y.children("span").html();if(!X.text){X.text=Y.html()}var Z=Y.children("ul");if(Z.length){X.children=[];S(X.children,Z)}W.push(X)})}};var k=1;var z={render:function(Z,ab,aa){var Y=B.data(Z,"tree");var S=Y.options;var X=B(ab).prev(".tree-node");var V=X.length?B(Z).tree("getNode",X[0]):null;var U=X.find("span.tree-indent, span.tree-hit").length;var W=T.call(this,U,aa);B(ab).append(W.join(""));function T(af,ad){var aj=[];for(var ah=0;ah<ad.length;ah++){var ai=ad[ah];if(ai.state!="open"&&ai.state!="closed"){ai.state="open"}ai.domId="_easyui_tree_"+k++;aj.push("<li>");aj.push('<div id="'+ai.domId+'" class="tree-node'+(ai.nodeCls?" "+ai.nodeCls:"")+'">');for(var ae=0;ae<af;ae++){aj.push('<span class="tree-indent"></span>')}if(ai.state=="closed"){aj.push('<span class="tree-hit tree-collapsed"></span>');aj.push('<span class="tree-icon tree-folder '+(ai.iconCls?ai.iconCls:"")+'"></span>')}else{if(ai.children&&ai.children.length){aj.push('<span class="tree-hit tree-expanded"></span>');aj.push('<span class="tree-icon tree-folder tree-folder-open '+(ai.iconCls?ai.iconCls:"")+'"></span>')}else{aj.push('<span class="tree-indent"></span>');aj.push('<span class="tree-icon tree-file '+(ai.iconCls?ai.iconCls:"")+'"></span>')}}if(this.hasCheckbox(Z,ai)){var ac=0;if(V&&V.checkState=="checked"&&S.cascadeCheck){ac=1;ai.checked=true}else{if(ai.checked){B.easyui.addArrayItem(Y.tmpIds,ai.domId)}}ai.checkState=ac?"checked":"unchecked";aj.push('<span class="tree-checkbox tree-checkbox'+ac+'"></span>')}else{ai.checkState=undefined;ai.checked=undefined}aj.push('<span class="tree-title">'+S.formatter.call(Z,ai)+"</span>");aj.push("</div>");if(ai.children&&ai.children.length){var ag=T.call(this,af+1,ai.children);aj.push('<ul style="display:'+(ai.state=="closed"?"none":"block")+'">');aj=aj.concat(ag);aj.push("</ul>")}aj.push("</li>")}return aj}},hasCheckbox:function(S,V){var T=B.data(S,"tree");var U=T.options;if(U.checkbox){if(B.isFunction(U.checkbox)){if(U.checkbox.call(S,V)){return true}else{return false}}else{if(U.onlyLeafCheck){if(V.state=="open"&&!(V.children&&V.children.length)){return true}}else{return true}}}return false}};B.fn.tree.defaults={url:null,method:"post",animate:false,checkbox:false,cascadeCheck:true,onlyLeafCheck:false,lines:false,dnd:false,editorHeight:26,data:null,queryParams:{},formatter:function(S){return S.text},filter:function(W,V){var S=[];B.map(B.isArray(W)?W:[W],function(X){X=B.trim(X);if(X){S.push(X)}});for(var U=0;U<S.length;U++){var T=V.text.toLowerCase().indexOf(S[U].toLowerCase());if(T>=0){return true}}return !S.length},loader:function(U,T,S){var V=B(this).tree("options");if(!V.url){return false}B.ajax({type:V.method,url:V.url,data:U,dataType:"json",success:function(W){T(W)},error:function(){S.apply(this,arguments)}})},loadFilter:function(T,S){return T},view:z,onBeforeLoad:function(T,S){},onLoadSuccess:function(S,T){},onLoadError:function(){},onClick:function(S){},onDblClick:function(S){},onBeforeExpand:function(S){},onExpand:function(S){},onBeforeCollapse:function(S){},onCollapse:function(S){},onBeforeCheck:function(T,S){},onCheck:function(S,T){},onBeforeSelect:function(S){},onSelect:function(S){},onContextMenu:function(T,S){},onBeforeDrag:function(S){},onStartDrag:function(S){},onStopDrag:function(S){},onDragEnter:function(T,S){},onDragOver:function(T,S){},onDragLeave:function(T,S){},onBeforeDrop:function(S,U,T){},onDrop:function(U,T,S){},onBeforeEdit:function(S){},onAfterEdit:function(S){},onCancelEdit:function(S){}}})(jQuery);