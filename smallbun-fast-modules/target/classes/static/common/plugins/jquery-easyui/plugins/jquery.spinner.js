(function(b){function c(h){var g=b.data(h,"spinner");var f=g.options;var e=b.extend(true,[],f.icons);if(f.spinAlign=="left"||f.spinAlign=="right"){f.spinArrow=true;f.iconAlign=f.spinAlign;var d={iconCls:"spinner-button-updown",handler:function(m){var l=b(m.target).closest(".spinner-arrow-up,.spinner-arrow-down");a(m.data.target,l.hasClass("spinner-arrow-down"))}};if(f.spinAlign=="left"){e.unshift(d)}else{e.push(d)}}else{f.spinArrow=false;if(f.spinAlign=="vertical"){if(f.buttonAlign!="top"){f.buttonAlign="bottom"}f.clsLeft="textbox-button-bottom";f.clsRight="textbox-button-top"}else{f.clsLeft="textbox-button-left";f.clsRight="textbox-button-right"}}b(h).addClass("spinner-f").textbox(b.extend({},f,{icons:e,doSize:false,onResize:function(o,m){if(!f.spinArrow){var r=b(this).next();var q=r.find(".textbox-button:not(.spinner-button)");if(q.length){var p=q.outerWidth();var n=q.outerHeight();var l=r.find(".spinner-button."+f.clsLeft);var s=r.find(".spinner-button."+f.clsRight);if(f.buttonAlign=="right"){s.css("marginRight",p+"px")}else{if(f.buttonAlign=="left"){l.css("marginLeft",p+"px")}else{if(f.buttonAlign=="top"){s.css("marginTop",n+"px")}else{l.css("marginBottom",n+"px")}}}}}f.onResize.call(this,o,m)}}));b(h).attr("spinnerName",b(h).attr("textboxName"));g.spinner=b(h).next();g.spinner.addClass("spinner");if(f.spinArrow){var k=g.spinner.find(".spinner-button-updown");k.append('<span class="spinner-arrow spinner-button-top"><span class="spinner-arrow-up"></span></span><span class="spinner-arrow spinner-button-bottom"><span class="spinner-arrow-down"></span></span>')}else{var j=b('<a href="javascript:;" class="textbox-button spinner-button"></a>').addClass(f.clsLeft).appendTo(g.spinner);var i=b('<a href="javascript:;" class="textbox-button spinner-button"></a>').addClass(f.clsRight).appendTo(g.spinner);j.linkbutton({iconCls:f.reversed?"spinner-button-up":"spinner-button-down",onClick:function(){a(h,!f.reversed)}});i.linkbutton({iconCls:f.reversed?"spinner-button-down":"spinner-button-up",onClick:function(){a(h,f.reversed)}});if(f.disabled){b(h).spinner("disable")}if(f.readonly){b(h).spinner("readonly")}}b(h).spinner("resize")}function a(f,e){var d=b(f).spinner("options");d.spin.call(f,e);d[e?"onSpinDown":"onSpinUp"].call(f);b(f).spinner("validate")}b.fn.spinner=function(f,e){if(typeof f=="string"){var d=b.fn.spinner.methods[f];if(d){return d(this,e)}else{return this.textbox(f,e)}}f=f||{};return this.each(function(){var g=b.data(this,"spinner");if(g){b.extend(g.options,f)}else{g=b.data(this,"spinner",{options:b.extend({},b.fn.spinner.defaults,b.fn.spinner.parseOptions(this),f)})}c(this)})};b.fn.spinner.methods={options:function(e){var d=e.textbox("options");return b.extend(b.data(e[0],"spinner").options,{width:d.width,value:d.value,originalValue:d.originalValue,disabled:d.disabled,readonly:d.readonly})}};b.fn.spinner.parseOptions=function(d){return b.extend({},b.fn.textbox.parseOptions(d),b.parser.parseOptions(d,["min","max","spinAlign",{increment:"number",reversed:"boolean"}]))};b.fn.spinner.defaults=b.extend({},b.fn.textbox.defaults,{min:null,max:null,increment:1,spinAlign:"right",reversed:false,spin:function(d){},onSpinUp:function(){},onSpinDown:function(){}})})(jQuery);