layui.define("layer",function(w){var C=layui.$,m=layui.layer,z=layui.hint(),j=layui.device(),k="form",b=".layui-form",D="layui-this",g="layui-hide",y="layui-disabled",B=function(){this.config={verify:{required:[/[\S]+/,"必填项不能为空"],phone:[/^1\d{10}$/,"请输入正确的手机号"],email:[/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,"邮箱格式不正确"],url:[/(^#)|(^http(s*):\/\/[^\s]+\.[^\s]+)/,"链接格式不正确"],number:function(a){if(!a||isNaN(a)){return"只能填写数字"}},date:[/^(\d{4})[-\/](\d{1}|0\d{1}|1[0-2])([-\/](\d{1}|0\d{1}|[1-2][0-9]|3[0-1]))*$/,"日期格式不正确"],identity:[/(^\d{15}$)|(^\d{17}(x|X|\d)$)/,"请输入正确的身份证号"]}}};B.prototype.set=function(c){var a=this;return C.extend(!0,a.config,c),a},B.prototype.verify=function(c){var a=this;return C.extend(!0,a.config.verify,c),a},B.prototype.on=function(c,a){return layui.onevent.call(this,k,c,a)},B.prototype.val=function(f,d){var c=C(b+'[lay-filter="'+f+'"]');c.each(function(i,h){var l=C(this);layui.each(d,function(s,r){var o,n=l.find('[name="'+s+'"]');n[0]&&(o=n[0].type,"checkbox"===o?n[0].checked=r:"radio"===o?n.each(function(){this.value===r&&(this.checked=!0)}):n.val(r))})}),q.render(null,f)},B.prototype.render=function(f,c){var l=this,a=C(b+function(){return c?'[lay-filter="'+c+'"]':""}()),h={select:function(){var E,t="请选择",H="layui-form-select",s="layui-select-title",o="layui-select-none",F="",u=a.find("select"),I=function(e,d){C(e.target).parent().hasClass(s)&&!d||(C("."+H).removeClass(H+"ed "+H+"up"),E&&F&&E.val(F)),E=null},G=function(L,S,N){var P,e=C(this),n=L.find("."+s),v=n.find("input"),Q=L.find("dl"),M=Q.children("dd"),O=this.selectedIndex;if(!S){var d=function(){var T=L.offset().top+L.outerHeight()+5-p.scrollTop(),i=Q.outerHeight();O=e[0].selectedIndex,L.addClass(H+"ed"),M.removeClass(g),P=null,M.eq(O).addClass(D).siblings().removeClass(D),T+i>p.height()&&T>=i&&L.addClass(H+"up"),K()},R=function(i){L.removeClass(H+"ed "+H+"up"),v.blur(),P=null,i||r(v.val(),function(U){var T=e[0].selectedIndex;U&&(F=C(e[0].options[T]).html(),0===T&&F===v.attr("placeholder")&&(F=""),v.val(F||""))})},K=function(){var W=Q.children("dd."+D);if(W[0]){var V=W.position().top,U=Q.height(),T=W.height();V>U&&Q.scrollTop(V+Q.scrollTop()-U+T-5),V<0&&Q.scrollTop(V+Q.scrollTop()-5)}};n.on("click",function(i){L.hasClass(H+"ed")?R():(I(i,!0),d()),Q.find("."+o).remove()}),n.find(".layui-edge").on("click",function(){v.focus()}),v.on("keyup",function(T){var i=T.keyCode;9===i&&d()}).on("keydown",function(V){var U=V.keyCode;9===U&&R();var T=function(X,W){var Z,i;V.preventDefault();var Y=function(){var ab=Q.children("dd."+D);if(Q.children("dd."+g)[0]&&"next"===X){var aa=Q.children("dd:not(."+g+",."+y+")"),ac=aa.eq(0).index();if(ac>=0&&ac<ab.index()&&!aa.hasClass(D)){return aa.eq(0).prev()[0]?aa.eq(0).prev():Q.children(":last")}}return W&&W[0]?W:P&&P[0]?P:ab}();return i=Y[X](),Z=Y[X]("dd:not(."+g+")"),i[0]?(P=Y[X](),Z[0]&&!Z.hasClass(y)||!P[0]?(Z.addClass(D).siblings().removeClass(D),void K()):T(X,P)):P=null};38===U&&T("prev"),40===U&&T("next"),13===U&&(V.preventDefault(),Q.children("dd."+D).trigger("click"))});var r=function(W,V,U){var X=0;layui.each(M,function(){var Z=C(this),Y=Z.text(),aa=Y.indexOf(W)===-1;(""===W||"blur"===U?W!==Y:aa)&&X++,"keyup"===U&&Z[aa?"addClass":"removeClass"](g)});var T=X===M.length;return V(T),T},J=function(V){var U=this.value,T=V.keyCode;return 9!==T&&13!==T&&37!==T&&38!==T&&39!==T&&40!==T&&(r(U,function(i){i?Q.find("."+o)[0]||Q.append('<p class="'+o+'">无匹配项</p>'):Q.find("."+o).remove()},"keyup"),""===U&&Q.find("."+o).remove(),void K())};N&&v.on("keyup",J).on("blur",function(U){var T=e[0].selectedIndex;E=v,F=C(e[0].options[T]).html(),0===T&&F===v.attr("placeholder")&&(F=""),setTimeout(function(){r(v.val(),function(i){F||v.val("")},"blur")},200)}),M.on("click",function(){var T=C(this),i=T.attr("lay-value"),U=e.attr("lay-filter");return !T.hasClass(y)&&(T.hasClass("layui-select-tips")?v.val(""):(v.val(T.text()),T.addClass(D)),T.siblings().removeClass(D),e.val(i).removeClass("layui-form-danger"),layui.event.call(this,k,"select("+U+")",{elem:e[0],value:i,othis:L}),R(!0),!1)}),L.find("dl>dt").on("click",function(i){return !1}),C(document).off("click",I).on("click",I)}};u.each(function(O,L){var i=C(this),J=i.next("."+H),R=this.disabled,P=L.value,N=C(L.options[L.selectedIndex]),Q=L.options[0];if("string"==typeof i.attr("lay-ignore")){return i.show()}var M="string"==typeof i.attr("lay-search"),n=Q?Q.value?t:Q.innerHTML||t:t,K=C(['<div class="'+(M?"":"layui-unselect ")+H,(R?" layui-select-disabled":"")+'">','<div class="'+s+'">','<input type="text" placeholder="'+n+'" '+('value="'+(P?N.html():"")+'"')+(M?"":" readonly")+' class="layui-input'+(M?"":" layui-unselect")+(R?" "+y:"")+'">','<i class="layui-edge"></i></div>','<dl class="layui-anim layui-anim-upbit'+(i.find("optgroup")[0]?" layui-select-group":"")+'">',function(r){var d=[];return layui.each(r,function(S,v){0!==S||v.value?"optgroup"===v.tagName.toLowerCase()?d.push("<dt>"+v.label+"</dt>"):d.push('<dd lay-value="'+v.value+'" class="'+(P===v.value?D:"")+(v.disabled?" "+y:"")+'">'+v.innerHTML+"</dd>"):d.push('<dd lay-value="" class="layui-select-tips">'+(v.innerHTML||t)+"</dd>")}),0===d.length&&d.push('<dd lay-value="" class="'+y+'">没有选项</dd>'),d.join("")}(i.find("*"))+"</dl>","</div>"].join(""));J[0]&&J.remove(),i.after(K),G.call(this,K,R,M)})},checkbox:function(){var o={checkbox:["layui-form-checkbox","layui-form-checked","checkbox"],_switch:["layui-form-switch","layui-form-onswitch","switch"]},n=a.find("input[type=checkbox]"),d=function(t,s){var r=C(this);t.on("click",function(){var e=r.attr("lay-filter"),i=(r.attr("lay-text")||"").split("|");r[0].disabled||(r[0].checked?(r[0].checked=!1,t.removeClass(s[1]).find("em").text(i[1])):(r[0].checked=!0,t.addClass(s[1]).find("em").text(i[0])),layui.event.call(r[0],k,s[2]+"("+e+")",{elem:r[0],value:r[0].value,othis:t}))})};n.each(function(F,v){var E=C(this),e=E.attr("lay-skin"),J=(E.attr("lay-text")||"").split("|"),t=this.disabled;"switch"===e&&(e="_"+e);var I=o[e]||o.checkbox;if("string"==typeof E.attr("lay-ignore")){return E.show()}var H=E.next("."+I[0]),G=C(['<div class="layui-unselect '+I[0],v.checked?" "+I[1]:"",t?" layui-checkbox-disbaled "+y:"",'"',e?' lay-skin="'+e+'"':"",">",function(){var r=v.title.replace(/\s/g,""),i={checkbox:[r?"<span>"+v.title+"</span>":"",'<i class="layui-icon layui-icon-ok"></i>'].join(""),_switch:"<em>"+((v.checked?J[0]:J[1])||"")+"</em><i></i>"};return i[e]||i.checkbox}(),"</div>"].join(""));H[0]&&H.remove(),E.after(G),d.call(this,G,I)})},radio:function(){var r="layui-form-radio",o=["&#xe643;","&#xe63f;"],d=a.find("input[type=radio]"),s=function(e){var t=C(this),i="layui-anim-scaleSpring";e.on("click",function(){var E=t[0].name,F=t.parents(b),n=t.attr("lay-filter"),v=F.find("input[name="+E.replace(/(\.|#|\[|\])/g,"\\$1")+"]");t[0].disabled||(layui.each(v,function(){var u=C(this).next("."+r);this.checked=!1,u.removeClass(r+"ed"),u.find(".layui-icon").removeClass(i).html(o[1])}),t[0].checked=!0,e.addClass(r+"ed"),e.find(".layui-icon").addClass(i).html(o[0]),layui.event.call(t[0],k,"radio("+n+")",{elem:t[0],value:t[0].value,othis:e}))})};d.each(function(i,e){var v=C(this),t=v.next("."+r),E=this.disabled;if("string"==typeof v.attr("lay-ignore")){return v.show()}t[0]&&t.remove();var n=C(['<div class="layui-unselect '+r,e.checked?" "+r+"ed":"",(E?" layui-radio-disbaled "+y:"")+'">','<i class="layui-anim layui-icon">'+o[e.checked?0:1]+"</i>","<div>"+function(){var u=e.title||"";return"string"==typeof v.next().attr("lay-radio")&&(u=v.next().html(),v.next().remove()),u}()+"</div>","</div>"].join(""));v.after(n),s.call(this,n)})}};return f?h[f]?h[f]():z.error("不支持的"+f+"表单渲染"):layui.each(h,function(i,d){d()}),l};var x=function(){var n=C(this),F=q.config.verify,I=null,i="layui-form-danger",t={},H=n.parents(b),r=H.find("*[lay-verify]"),G=n.parents("form")[0],l=H.find("input,select,textarea"),E=n.attr("lay-filter");if(layui.each(r,function(s,a){var o=C(this),J=o.attr("lay-verify").split("|"),h=o.attr("lay-verType"),v=o.val();if(o.removeClass(i),layui.each(J,function(L,u){var M,K="",d="function"==typeof F[u];if(F[u]){var M=d?K=F[u](v,a):!F[u][0].test(v);if(K=K||F[u][1],M){return"tips"===h?m.tips(K,function(){return"string"==typeof o.attr("lay-ignore")||"select"!==a.tagName.toLowerCase()&&!/^checkbox|radio$/.test(a.type)?o:o.next()}(),{tips:1}):"alert"===h?m.alert(K,{title:"提示",shadeClose:!0}):m.msg(K,{icon:5,shift:6}),j.android||j.ios||a.focus(),o.addClass(i),I=!0}}}),I){return I}}),I){return !1}var f={};return layui.each(l,function(d,c){if(c.name=(c.name||"").replace(/^\s*|\s*&/,""),c.name){if(/^.*\[\]$/.test(c.name)){var a=c.name.match(/^(.*)\[\]$/g)[0];f[a]=0|f[a],c.name=c.name.replace(/^(.*)\[\]$/,"$1["+f[a]+++"]")}/^checkbox|radio$/.test(c.type)&&!c.checked||(t[c.name]=c.value)}}),layui.event.call(this,k,"submit("+E+")",{elem:this,form:G,field:t})},q=new B,A=C(document),p=C(window);q.render(),A.on("reset",b,function(){var a=C(this).attr("lay-filter");setTimeout(function(){q.render(null,a)},50)}),A.on("submit",b,x).on("click","*[lay-submit]",x),w(k,q)});