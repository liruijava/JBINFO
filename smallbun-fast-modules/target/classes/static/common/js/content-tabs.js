var App=function(){var p="/";var o="static/common/img/";var m="static/common/plugins/";var a="static/common/css/";var t=function(){var x=App.getViewPort().height-$(".main-footer").outerHeight()-$(".main-header").outerHeight()-$(".content-tabs").outerHeight();return x};var i=function(){var x=App.getViewPort().height-$(".main-footer").outerHeight()-$(".main-header").outerHeight()-$(".content-tabs").outerHeight();$(".content-iframe").css({height:x});$(".tab_iframe").css({height:x});$(".tab_iframe").css({width:"100%"})};var j=function(){var x=document.documentElement;if(x.requestFullscreen){x.requestFullscreen()}else{if(x.mozRequestFullScreen){x.mozRequestFullScreen()}else{if(x.webkitRequestFullScreen){x.webkitRequestFullScreen()}else{if(elem.msRequestFullscreen){elem.msRequestFullscreen()}}}}};var s=function(){if(document.exitFullscreen){document.exitFullscreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}else{if(document.msExitFullscreen){document.msExitFullscreen()}}}}};var e=function(){if(!$().iCheck){return}$(".icheck").each(function(){var y=$(this).attr("data-checkbox")?$(this).attr("data-checkbox"):"icheckbox_minimal-grey";var x=$(this).attr("data-radio")?$(this).attr("data-radio"):"iradio_minimal-grey";if(y.indexOf("_line")>-1||x.indexOf("_line")>-1){$(this).iCheck({checkboxClass:y,radioClass:x,insert:'<div class="icheck_line-icon"></div>'+$(this).attr("data-label")})}else{$(this).iCheck({checkboxClass:y,radioClass:x})}})};var h=function(){if(!$().bootstrapSwitch){return}$(".make-switch").bootstrapSwitch()};var b=function(){if(!$().confirmation){return}$("[data-toggle=confirmation]").confirmation({container:"body",btnOkClass:"btn btn-sm btn-success",btnCancelClass:"btn btn-sm btn-danger"})};var g=function(){$("body").on("shown.bs.collapse",".accordion.scrollable",function(x){App.scrollTo($(x.target))})};var l=function(){if(location.hash){var x=encodeURI(location.hash.substr(1));$('a[href="#'+x+'"]').parents(".tab-pane:hidden").each(function(){var y=$(this).attr("id");$('a[href="#'+y+'"]').click()});$('a[href="#'+x+'"]').click()}if($().tabdrop){$(".tabbable-tabdrop .nav-pills, .tabbable-tabdrop .nav-tabs").tabdrop({text:'<i class="fa fa-ellipsis-v"></i>&nbsp;<i class="fa fa-angle-down"></i>'})}};var u=function(){$("body").on("hide.bs.modal",function(){if($(".modal:visible").length>1&&$("html").hasClass("modal-open")===false){$("html").addClass("modal-open")}else{if($(".modal:visible").length<=1){$("html").removeClass("modal-open")}}});$("body").on("show.bs.modal",".modal",function(){if($(this).hasClass("modal-scroll")){$("body").addClass("modal-open-noscroll")}});$("body").on("hide.bs.modal",".modal",function(){$("body").removeClass("modal-open-noscroll")});$("body").on("hidden.bs.modal",".modal:not(.modal-cached)",function(){$(this).removeData("bs.modal")})};var n=function(){$(".tooltips").tooltip();$(".portlet > .portlet-title .fullscreen").tooltip({container:"body",title:"Fullscreen"});$(".portlet > .portlet-title > .tools > .reload").tooltip({container:"body",title:"Reload"});$(".portlet > .portlet-title > .tools > .remove").tooltip({container:"body",title:"Remove"});$(".portlet > .portlet-title > .tools > .config").tooltip({container:"body",title:"Settings"});$(".portlet > .portlet-title > .tools > .collapse, .portlet > .portlet-title > .tools > .expand").tooltip({container:"body",title:"Collapse/Expand"})};var w=function(){$("body").on("click",".dropdown-menu.hold-on-click",function(x){x.stopPropagation()})};var r=function(){$("body").on("click",'[data-close="alert"]',function(x){$(this).parent(".alert").hide();$(this).closest(".note").hide();x.preventDefault()});$("body").on("click",'[data-close="note"]',function(x){$(this).closest(".note").hide();x.preventDefault()});$("body").on("click",'[data-remove="note"]',function(x){$(this).closest(".note").remove();x.preventDefault()})};var c=function(){$('[data-hover="dropdown"]').not(".hover-initialized").each(function(){$(this).dropdownHover();$(this).addClass("hover-initialized")})};var d=function(){var z=!!navigator.userAgent.match(/MSIE 8.0/);var y=!!navigator.userAgent.match(/MSIE 9.0/);var x=!!navigator.userAgent.match(/MSIE 10.0/);if(z||y){$("input[placeholder]:not(.placeholder-no-fix), textarea[placeholder]:not(.placeholder-no-fix)").each(function(){var A=$(this);if(A.val()===""&&A.attr("placeholder")!==""){A.addClass("placeholder").val(A.attr("placeholder"))}A.focus(function(){if(A.val()==A.attr("placeholder")){A.val("")}});A.blur(function(){if(A.val()===""||A.val()==A.attr("placeholder")){A.val(A.attr("placeholder"))}})})}};var k;var q=function(){$(".popovers").popover();$(document).on("click.bs.popover.data-api",function(x){if(k){k.popover("hide")}})};var f=function(){App.initSlimScroll(".scroller")};var v=function(){var x=0;$(".fullscreen").bind("click",function(){if(x%2===0){j()}else{s()}x++})};return{init:function(){e();h();f();r();w();l();n();q();g();u();b();d();v()},initSlimScroll:function(x){$(x).each(function(){if($(this).attr("data-initialized")){return}var y;if($(this).attr("data-height")){y=$(this).attr("data-height")}else{y=$(this).css("height")}$(this).slimScroll({allowPageScroll:true,size:"7px",color:($(this).attr("data-handle-color")?$(this).attr("data-handle-color"):"#bbb"),wrapperClass:($(this).attr("data-wrapper-class")?$(this).attr("data-wrapper-class"):"slimScrollDiv"),railColor:($(this).attr("data-rail-color")?$(this).attr("data-rail-color"):"#eaeaea"),position:isRTL?"left":"right",height:y,alwaysVisible:($(this).attr("data-always-visible")=="1"?true:false),railVisible:($(this).attr("data-rail-visible")=="1"?true:false),disableFadeOut:true});$(this).attr("data-initialized","1")})},destroySlimScroll:function(x){$(x).each(function(){if($(this).attr("data-initialized")==="1"){$(this).removeAttr("data-initialized");$(this).removeAttr("style");var z={};if($(this).attr("data-handle-color")){z["data-handle-color"]=$(this).attr("data-handle-color")}if($(this).attr("data-wrapper-class")){z["data-wrapper-class"]=$(this).attr("data-wrapper-class")}if($(this).attr("data-rail-color")){z["data-rail-color"]=$(this).attr("data-rail-color")}if($(this).attr("data-always-visible")){z["data-always-visible"]=$(this).attr("data-always-visible")}if($(this).attr("data-rail-visible")){z["data-rail-visible"]=$(this).attr("data-rail-visible")}$(this).slimScroll({wrapperClass:($(this).attr("data-wrapper-class")?$(this).attr("data-wrapper-class"):"slimScrollDiv"),destroy:true});var y=$(this);$.each(z,function(A,B){y.attr(A,B)})}})},getIframeLayoutHeight:function(){return t()},requestFullScreen:function(){return j()},handleIframeContent:function(){return i()},handleSidebarAjaxContent:function(){jQuery(".sidebar-menu").on("click"," li > a.ajaxify",function(y){y.preventDefault();var x=$(this).attr("href");var z=$("#tab-page-content");App.startPageLoading({message:"加载中..."});$.get(x,{},function(A){z.html(A);App.stopPageLoading()})})},fixIframeContent:function(){setInterval(function(){i()},200)},blockUI:function(x){x=$.extend(true,{},x);var y="";if(x.animate){y='<div class="loading-message '+(x.boxed?"loading-message-boxed":"")+'"><div class="block-spinner-bar"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div></div>'}else{if(x.iconOnly){y='<div class="loading-message '+(x.boxed?"loading-message-boxed":"")+'"><img src="'+this.getGlobalImgPath()+'loading/loading-spinner-blue.gif" align=""></div>'}else{if(x.textOnly){y='<div class="loading-message '+(x.boxed?"loading-message-boxed":"")+'"><span>&nbsp;&nbsp;'+(x.message?x.message:"LOADING...")+"</span></div>"}else{y='<div class="loading-message '+(x.boxed?"loading-message-boxed":"")+'"><img src="'+this.getGlobalImgPath()+'loading/loading-spinner-blue.gif" align=""><span>&nbsp;&nbsp;'+(x.message?x.message:"LOADING...")+"</span></div>"}}}if(x.target){var z=$(x.target);if(z.height()<=($(window).height())){x.cenrerY=true}z.block({message:y,baseZ:x.zIndex?x.zIndex:1000,centerY:x.cenrerY!==undefined?x.cenrerY:false,css:{top:"10%",border:"0",padding:"0",backgroundColor:"none"},overlayCSS:{backgroundColor:x.overlayColor?x.overlayColor:"#555",opacity:x.boxed?0.05:0.1,cursor:"wait"}})}else{$.blockUI({message:y,baseZ:x.zIndex?x.zIndex:1000,css:{border:"0",padding:"0",backgroundColor:"none"},overlayCSS:{backgroundColor:x.overlayColor?x.overlayColor:"#555",opacity:x.boxed?0.05:0.1,cursor:"wait"}})}},unblockUI:function(x,y){if(x){$(x).unblock({onUnblock:function(){$(x).css("position","");$(x).css("zoom","")}})}else{$.unblockUI()}},startPageLoading:function(x){if(x&&x.animate){$(".page-spinner-bar").remove();$("body").append('<div class="page-spinner-bar"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div>')}else{$(".page-loading").remove();$("body").append('<div class="page-loading"><img src="'+this.getGlobalImgPath()+'loading/loading-spinner-blue.gif"/>&nbsp;&nbsp;<span>'+(x&&x.message?x.message:"Loading...")+"</span></div>")}},stopPageLoading:function(){$(".page-loading, .page-spinner-bar").remove()},getViewPort:function(){var y=window,x="inner";if(!("innerWidth" in window)){x="client";y=document.documentElement||document.body}return{width:y[x+"Width"],height:y[x+"Height"]}},getcontextPath:function(){return p},setcontextPath:function(x){p=x},setGlobalImgPath:function(x){o=x},getGlobalImgPath:function(){return p+o},setGlobalPluginsPath:function(x){m=x},getGlobalPluginsPath:function(){return p+m},getGlobalCssPath:function(){return p+a}}}();jQuery(document).ready(function(){App.init()});(function(){function a(c,d){d=d||{bubbles:false,cancelable:false,detail:undefined};var b=document.createEvent("CustomEvent");b.initCustomEvent(c,d.bubbles,d.cancelable,d.detail);return b}a.prototype=window.Event.prototype;window.CustomEvent=a})();var addTabs=function(b){var a=window.location.protocol+"//"+window.location.host+"/";b.url=a+b.url;var f="tab_"+b.id;var e="",c="";if(!window.top.$("#"+f)[0]){e='<a href="javascript:void(0);" id="tab_'+f+'"  data-id="'+f+'"  class="menu_tab" title='+b.title+">"+b.title;if(b.close){e+=' <i class="fa fa-remove page_tab_close" style="cursor: pointer;" data-id="'+f+'" onclick="closeTab(this)"></i>'}e+="</a>";var d="";if(b.content){c='<div role="tabpanel" class="tab-pane" id="'+f+'">'+b.content+"</div>"}else{App.blockUI({target:"#tab-content",boxed:true,message:"加载中......",animate:false});c='<div role="tabpanel" class="tab-pane" id="'+f+'" style="background: #F2F2F2;">';d="<iframe onload=\"javascript:App.unblockUI('#tab-content','"+b.title+'\');" src="'+b.url+'" width="100%" height="100%" frameborder="no" border="0" marginwidth="0" marginheight="0" scrolling="yes"  allowtransparency="yes" id="iframe_'+f+'" class="  tab_iframe"></iframe>';c+=d;c+="</div>"}window.top.$(".page-tabs-content").append(e);window.top.$("#tab-content").append(c)}window.top.$(".page-tabs-content > a.active").removeClass("active");window.top.$("#tab-content > .active").removeClass("active");window.top.$("#tab_"+f).addClass("active");scrollToTab(window.top.$(".menu_tab.active"));window.top.$("#"+f).addClass("active");App.fixIframeContent()};var addTab=function(a){var e="tab_"+a.id;var d="",b="";if(!window.top.$("#"+e)[0]){d='<a href="javascript:void(0);" id="tab_'+e+'"  data-id="'+e+'"  class="menu_tab" title='+a.title+">"+a.title;if(a.close){d+=' <i class="fa fa-remove page_tab_close" style="cursor: pointer;" data-id="'+e+'" onclick="closeTab(this)"></i>'}d+="</a>";var c="";if(a.content){b='<div role="tabpanel" class="tab-pane" id="'+e+'">'+a.content+"</div>"}else{App.blockUI({target:"#tab-content",boxed:true,message:"加载中......",animate:false});b='<div role="tabpanel" class="tab-pane" id="'+e+'" style="background: #F2F2F2;">';c='<iframe data-id-list="'+a.list_id+"\"  onload=\"javascript:App.unblockUI('#tab-content','"+a.title+'\');" src="'+a.url+'" width="100%" height="100%" frameborder="no" border="0" marginwidth="0" marginheight="0" scrolling="yes"  allowtransparency="yes" id="iframe_'+e+'" class="  tab_iframe"></iframe>';b+=c;b+="</div>"}window.top.$(".page-tabs-content").append(d);window.top.$("#tab-content").append(b)}window.top.$(".page-tabs-content > a.active").removeClass("active");window.top.$("#tab-content > .active").removeClass("active");window.top.$("#tab_"+e).addClass("active");scrollToTab(window.top.$(".menu_tab.active"));window.top.$("#"+e).addClass("active");App.fixIframeContent()};var closeTab=function(c){var d=$(c).attr("data-id");if($(".page-tabs-content > a.active").attr("id")==="tab_"+d){var b=$("#tab_"+d).prev();var a=$("#"+d).prev();setTimeout(function(){b.addClass("active");a.addClass("active")},300)}$("#tab_"+d).remove();$("#"+d).remove()};var closeCurrentTab=function(){var a=$(".page-tabs-content").find(".active").find(".fa-remove").parents("a");if(a){closeTab(a)}};var refreshTab=function(){var a=$(".page-tabs-content").find(".active").attr("data-id");var c=$("#iframe_"+a);var b=c.attr("src");c.attr("src",b)};var refreshTable=function(){var a=$(".page-tabs-content").find(".active").attr("data-id");$("#iframe_"+a)[0].contentWindow.$.table.refresh()};var closeOtherTabs=function(a){if(a){$(".page-tabs-content").children("[data-id]").find(".fa-remove").parents("a").each(function(){$("#"+$(this).data("id")).remove();$(this).remove()});var b=$(".page-tabs-content").children();if(b){$("#"+b.data("id")).addClass("active");b.addClass("active")}}else{$(".page-tabs-content").children("[data-id]").find(".fa-remove").parents("a").not(".active").each(function(){$("#"+$(this).data("id")).remove();$(this).remove()})}};var calSumWidth=function(a){var b=0;$(a).each(function(){b+=$(this).outerWidth(true)});return b};var scrollTabRight=function(){var e=Math.abs(parseInt($(".page-tabs-content").css("margin-left")));var b=calSumWidth($(".content-tabs").children().not(".menuTabs"));var a=$(".content-tabs").outerWidth(true)-b;var f=0;if($(".page-tabs-content").width()<a){return false}else{var c=$(".menu_tab:first");var d=0;while((d+$(c).outerWidth(true))<=e){d+=$(c).outerWidth(true);c=$(c).next()}d=0;while((d+$(c).outerWidth(true))<(a)&&c.length>0){d+=$(c).outerWidth(true);c=$(c).next()}f=calSumWidth($(c).prevAll());if(f>0){$(".page-tabs-content").animate({marginLeft:0-f+"px"},"fast")}}};var scrollToTab=function(d){var e=calSumWidth($(d).prevAll()),g=calSumWidth($(d).nextAll());var b=calSumWidth($(".content-tabs").children().not(".menuTabs"));var a=$(".content-tabs").outerWidth(true)-b;var f=0;if($(".page-tabs-content").outerWidth()<a){f=0}else{if(g<=(a-$(d).outerWidth(true)-$(d).next().outerWidth(true))){if((a-$(d).next().outerWidth(true))>g){f=e;var c=d;while((f-$(c).outerWidth())>($(".page-tabs-content").outerWidth()-a)){f-=$(c).prev().outerWidth();c=$(c).prev()}}}else{if(e>(a-$(d).outerWidth(true)-$(d).prev().outerWidth(true))){f=e-$(d).prev().outerWidth(true)}}}$(".page-tabs-content").animate({marginLeft:0-f+"px"},"fast")};var scrollTabLeft=function(){var e=Math.abs(parseInt($(".page-tabs-content").css("margin-left")));var b=calSumWidth($(".content-tabs").children().not(".menuTabs"));var a=$(".content-tabs").outerWidth(true)-b;var f=0;if($(".page-tabs-content").width()<a){return false}else{var c=$(".menu_tab:first");var d=0;while((d+$(c).outerWidth(true))<=e){d+=$(c).outerWidth(true);c=$(c).next()}d=0;if(calSumWidth($(c).prevAll())>a){while((d+$(c).outerWidth(true))<(a)&&c.length>0){d+=$(c).outerWidth(true);c=$(c).prev()}f=calSumWidth($(c).prevAll())}}$(".page-tabs-content").animate({marginLeft:0-f+"px"},"fast")};var activeTab=function(){var a=$(this).attr("data-id");$(".menu_tab").removeClass("active");$("#tab-content > .active").removeClass("active");$("#tab_"+a).addClass("active");$("#"+a).addClass("active");$("#iframe_"+a).animate({height:App.getIframeLayoutHeight()+1},500);$("#iframe_"+a).animate({height:App.getIframeLayoutHeight()-1},500);scrollToTab(this)};function closeCurrentTabPage(b){var a="tab_"+b.frameElement.getAttribute("id").substring(7,b.frameElement.getAttribute("id").length);var c=b.frameElement.getAttribute("data-id-list");$("#tab_"+a,parent.document).remove();$("#"+a,parent.document).remove();$(".menu_tab",parent.document).removeClass("active");$("#tab-content > .active",parent.document).removeClass("active");$("#tab_"+c,parent.document).addClass("active");$("#"+c,parent.document).addClass("active");$("#iframe_"+c,parent.document).animate({height:App.getIframeLayoutHeight()+1},500);$("#iframe_"+c,parent.document).animate({height:App.getIframeLayoutHeight()-1},500);scrollToTab(this)}function saveCurrentTabPage(b){var a="tab_"+b.frameElement.getAttribute("id").substring(7,b.frameElement.getAttribute("id").length);var c=b.frameElement.getAttribute("data-id-list");$("#tab_"+a,parent.document).remove();$("#"+a,parent.document).remove();$(".menu_tab",parent.document).removeClass("active");$("#tab-content > .active",parent.document).removeClass("active");$("#tab_"+c,parent.document).addClass("active");$("#"+c,parent.document).addClass("active");$("#iframe_"+c,parent.document).animate({height:App.getIframeLayoutHeight()+1},500);$("#iframe_"+c,parent.document).animate({height:App.getIframeLayoutHeight()-1},500);scrollToTab(this);refreshTable()}$(function(){$(".menuTabs").on("click",".menu_tab",activeTab)});